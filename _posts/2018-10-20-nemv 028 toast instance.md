---
layout: single
title: 모던웹(NEMV) 혼자 제작 하기 3기 - 28 클라우드 서버 만들기
category: nemv
tag: [nemv,server,toast,cloud]
comments: true
sidebar:
  nav: "nemv3"
---

클라우드 서버(인스턴스)를 만들고 접속하는 방법을 설명합니다.

{% include toc %}

# 인스턴스 추가

![alt 서비스 추가](/images/nemv/스크린샷 2018-10-22 오전 10.13.35.png)

좌측에 서비스 추가를 클릭합니다.

![alt 인스턴스 추가](/images/nemv/스크린샷 2018-10-22 오전 10.15.28.png)

인스턴스 추가를 클릭합니다.

![alt 인스턴스 생성](/images/nemv/스크린샷 2018-10-22 오전 10.16.54.png)

## 인스턴스 선택

서버 종류, 사양등을 선택합니다.

![alt centos 7.1 선택](/images/nemv/스크린샷 2018-10-22 오전 10.17.54.png)

CentOS를 서버 리눅스로 많이들 쓰는 편이라고 합니다. 사실 아무거나 써도 상관 없습니다.(_우분투, 데비안등_)

## 인스턴스 타입 선택

![alt 인스턴스 타입 선택](/images/nemv/스크린샷 2018-10-22 오전 10.18.53.png)

정확한 퍼포먼스가 어느 정도인지는 모르지만, 인텔 씨피유로 생각하면 u계열은 i3 m계열은 i5 c계열은 i7 정도의 느낌으로 이해하면 됩니다.

## 키페어 생성

최근에는 ssh 연결은 키페어로 많이들 하는 것 같습니다.

키를 다운 받아놓고 그 키로 접속하는 것입니다.

당연히 키는 유출되면 안되니 항상 주의해서 보관해야합니다.

![alt keyPair](/images/nemv/스크린샷 2018-10-22 오전 10.20.24.png)

키페어를 이름(nemvKey) 지어서 추가합니다.

![alt keyPair download](/images/nemv/스크린샷 2018-10-22 오전 10.21.23.png)

테스트를 위해 소스 디렉토리(nemv3) 상단에 복사해놓습니다.

## 공인(플로팅) 아이피 생성

![alt float ip](/images/nemv/스크린샷 2018-10-22 오전 10.23.43.png)

외부 연결을 위해 공인 아이피를 생성합니다.

공인아이피가 최소한 하나는 있어야합니다.

대부분 클라우드 서버가 공인아이피 비용으로 한달에 4~5000원 정도가 나옵니다.

## 생성된 리눅스 서버

![alt linux made](/images/nemv/스크린샷 2018-10-22 오전 10.25.50.png)

이제 서버가 만들어졌습니다.

네트워트 설정이 완료되지 않아서 아직은 서버로 접속을 할 수 없습니다.

# 네트워크 설정

ssh가 열려있지 않아서 보안 그룹 설정(Security Groups)에서 서비스할 포트를 열어야합니다.

## Security Group 생성

먼저 보안 그룹을 생성해야합니다. 이 보안 그룹은 나중에 다른 서버에도 사용할 수 있습니다.

![alt 보안 그룹 생성](/images/nemv/스크린샷 2018-10-22 오전 10.31.30.png)

Security Group 생성을 누릅니다.

![alt 보안 그룹 룰 추가](/images/nemv/스크린샷 2018-10-22 오전 10.33.13.png)

ssh를 선택하고 연결 할 수 있는 대역을 조절합니다.

기본 0.0.0.0/0은 아무데서나 접속 가능하기 때문에 위험하니 꼭 아이피 대역을 지정하는 것이 좋습니다.

- 0.0.0.0/0 : 아무데서나 접속 가능
- x.x.x.0/24 : x.x.x.1~254 접속 가능
- x.x.x.x/32 : 아이피 하나만 접속 가능, 주로 집에서 하실 분들은~ eg) 111.222.112.33/32

> 현재 아이피가 192.168.x.x 이거나 10.0.등이면 사설망입니다..  아이피를 주는 라우터의 아이피를 알아야합니다.  
자신의 아이피가 무엇인지 모르시는 분은 [http://www.findip.kr](http://www.findip.kr)에 접속해보시면 됩니다.

![alt 보안 그룹 생성 확인](/images/nemv/스크린샷 2018-10-22 오전 10.33.59.png)

22번 포트가 완전 열린 모습

## 인스턴스에 보안 그룹 연결

보안 그룹을 만들어진 인스턴스에 연결해야합니다. 

![alt 보안 그룹 연결](/images/nemv/스크린샷 2018-10-22 오전 10.35.34.png)

Compute - instance 로 가서 보안 그룹 변경을 클릭합니다.

![alt 보안 그룹 변경](/images/nemv/스크린샷 2018-10-22 오전 10.36.09.png)

아무것도 설정하지 않았을 때는 default로 되어 있습니다.

만들어 놓은 보안그룹 nemv로 변경해줍니다.

# 접속하기
 
## 키 권한 설정

받아 놓은 키로는 맥에서는 접속이 불가능 합니다.

키 권한을 고쳐줘야합니다.

```bash
$ chmod 600 nemvKey.pem
```

윈도우 환경에서는 필요 없을 지도 모르는데.. 만약 안되면 600에 상응하는 파일권한을 찾아보고 고쳐주세요~

## 연결

```bash
$ ssh -i nemvKey.pem root@x.x.x.x
```

해당 키가 있는 위치에서 접속합니다.

# 영상

{% include video id="zs6OXllWuAA" provider="youtube" %}   




